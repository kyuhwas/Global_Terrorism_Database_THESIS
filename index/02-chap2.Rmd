# Impact Analysis {#impact-analysis}

This part of the research uses descriptive statistics to explore and understand terrorist events from various perspectives. This is essential to examine characteristics of attacks and responsible groups over the period of time. Findings and insights from this analysis is eventually helpful to select appropriate data for the statistical modelling part. 

## Data Preparation

The primary data file `globalterrorismdb_0617dist.xlsx` used in this research contains over 170,000 terrorist attacks between 1970-2016 (excluding the year 1993). This file can be downloaded by filling up a form on START Consortium’s website ^[Accessing GTD data: https://www.start.umd.edu/gtd/contact/]. This file contains total of 135 variables categorized by incident ID and date, incident information, attack information, weapon information, target/victim information, perpetrator information, casualties and consequences, and additional information. Out of 135 variables, I have selected total of 38 variables from each categories that are relevant to research objective. During data cleaning process, I have made following changes (corrective steps) to original data to make it ready for analysis:

* renaming of some variables (such as `gname` to `group_name`, `INT_LOG` to `intl_logistical_attack`) to keep the analysis and codes interpretable to wider audience. 
* replacing 2.7% NAs in latitude and longitude with country level or closest matching geocodes. Note that most NAs refers to either disputed territories such as Kosovo or countries that no longer exists such as Czechoslovakia.
* 5% NAs in `nkill` (number of people killed) and 9% NAs in `nwound` (number of people wounded) variable replaced with 0. GTD reference manual suggests that "Where there is evidence of fatalities, but a figure is not reported or it is too vague to be of use, this field remains blank."
* NAs in regional variables i.e `city` and `provstate` replaced with "unknown"

 GTD data is further enriched with country and year wise indicators from World Bank Open Data to get multi-dimensional view and for modelling part. This data is also open-source and can be accessed through R library `WDI` ^[Searching and extracting data from the World Bank’s World Development Indicators. : https://cran.r-project.org/web/packages/WDI/WDI.pdf]. Following is the illustration of code used to query WDI api and to merge it with primary data. 

```{r eval=FALSE, include=TRUE}
# install WDI package in R and query the api with keyword
WDIsearch('conflict')

# create an index of selected variables based on search result
ind = c("arms_export" = "MS.MIL.XPRT.KD", 
        "arms_import" = "MS.MIL.MPRT.KD",
        "population" = "SP.POP.TOTL",
        "gdp_per_capita" = "NY.GDP.PCAP.KD",
        "refugee_origin" = "SM.POP.REFG.OR", 
        "refugee_asylum" = "SM.POP.REFG", 
        "net_migration" = "SM.POP.NETM",
        "n_peace_keepers" = "VC.PKP.TOTL.UN",
        "conflict_index" = "IC.PI.CIR")

countries_vec <- as.vector(unique(df$ISO)) # countries in gtd dataset

#Extract selected data by specifying start and end year
wdi_data <- WDI(indicator = ind, 
				start = 1970, 
				end = 2016, 
				extra = TRUE) %>%
  select(year, ISO = iso3c, arms_export, arms_import, population, 
  		 gdp_per_capita, refugee_origin, refugee_asylum, net_migration, 
  		 n_peace_keepers, conflict_index) %>% 
  drop_na(ISO) %>%
  filter(ISO %in% countries_vec) %>%
  replace_na(list(arms_export = 0, arms_import = 0, population = -1, 
  				  gdp_per_capita = 0, refugee_origin = 0, 
  				  refugee_asylum = 0, net_migration = 0, 
  				  n_peace_keepers = 0, conflict_index = -1)) 

# merge it with gtd data (by ISO code and year)
# (Not to run, already merged in data preparation step)
# df <- df %>% left_join(wdi_data)

```
Note that above mentioned external data is merged by country and year only, and missing values are replaced as shown in the code. Below are the variables (with short description where necessary) from clean and prepared dataset and that are used in data analysis part. 

```{r echo=FALSE}
tmp <- as.data.frame(names(df))
tmp$description <- c("a 12-digit Event ID", 
					 "year in which the incident occurred", 
					 "month", "day", "country", "world region", 
					 "an administrative division or unit of a country", 
					 "city", "latitude", "longitude",  
					 "method of attack (reflects the broad class of tactics used)", 
					 "type of weapon used in the incident", 
					 "type of target/victim", 
					 "nationality of the target that was attacked", 
					 "name of the group that carried out the attack", 
					 "number of total confirmed fatalities for the incident", 
					 "number of confirmed non-fatal injuries", 
					 "whether or not an incident extended more than 24 hours", 
					 "political, economic, religious, or social goal", 
					 "intention to coerce, or publicize to larger audience", 
					 "action from the incident is outside intl humanitarian law", 
					 "whether an incident being part of multiple attacks", 
					 "suicide attack",
					 "whether an incident was successful", 
					 "whether an attack carried out by unaffiliated Individual(s)",  
					 "cross border incident", 
					 "attack on target of a different nationality", 
					 "ISO code for country", 
					 "Approx. date of incident", 
					 "Arms exports (SIPRI trend indicator values)", 
					 "Arms imports (SIPRI trend indicator values)", 
					 "Population, total", 
					 "GDP per capita (constant 2010 US$)", 
					 "Refugee population by country or territory of origin", 
					 "Refugee population by country or territory of asylum", 
					 "Net migration", 
					 "Presence of peace keepers", 
					 "Extent of conflict of interest regulation index (0-10)")
names(tmp) <- c("Name of the Variable", "description")
knitr::kable(tmp, caption = "Short description of important variables",
		     booktabs = TRUE) %>%
  kable_styling(font_size = 12, full_width = F, position = "left")

```

Detailed information and explaination about each variable can be found GTD codebook. 


## Global Overview

A quick look at region level number attacks suggests that situation is becoming worst in Middle East & North Africa followed by South Asia, Sub-suharan Africa and Southeast Asia where exponential growth in number of attacks can be observed specifically from years 2010 to 2016.

```{r echo=FALSE, fig.cap="Attack Frequency by Year and Region", fig.height=5, out.width = "100%"}
tmp <- df %>% group_by(region, year) %>% summarize(attack_count = n())

ggplot(tmp, aes(x=year, y=attack_count, color = region)) + 
  geom_line(size = 1) + 
  facet_wrap( ~ region, ncol=3, scales = "free_y") + 
  ggtitle("Attack Frequency by Year and Region") + 
  scale_x_continuous(breaks= seq(1970, 2016, 15)) +
  theme(legend.position="none", plot.title = element_text(size=14),
  		strip.text.x = element_text(size = 8, face = "bold", colour = "steelblue4"))

```

An interesting observation is in Eastern Europe region where sudden increase in number of attacks can be observed during 2014-2015 and then sudden decrease in 2016. Within the most impacted regions, nearly similar trend of gradual increase in number of attacks after 2010 and peak during 2014-2015 is visible. It’s worth mentioning that in June 2014, Islamic State announced establishment of "Caliphate" while declaring Abu Bakr al-Baghdadi as "leader of Muslims everywhere" and urging other groups to pledge allegiance [@AlJazeera_2014]. Islamic State was at its peak strength during Jan 2014 to Jan 2015 [@Ceron_2018].

To understand the attack characteristics, let’s take a look at Frequency of attack type and type of weapon used by terrorist groups. 

```{r echo=FALSE, fig.cap="Trend in type of attack in all incidents globally", fig.height=3, out.width = "100%"}
tmp <- df %>% group_by(attack_type, year) %>% summarise(total_attacks = n()) 

# work around get pdf and html output
if( knitr:::is_latex_output() ) {
    include_graphics(path = "figure/heatmap_attack.png")
} else {
    tmp %>%
	    plot_ly(x=tmp$year, y=tmp$attack_type, z = tmp$total_attacks, 
	    		type = "heatmap", colors = viridis::plasma(100),
	            hoverinfo = 'text',text = ~paste("Year: ", year,
	                                             "<br>Attack type: ", attack_type,
	                                             "<br>Total attacks : ", total_attacks)) %>%
	      layout(title = "By Attack Type",
	             xaxis = list(autorange = "reversed"), 
	             yaxis = list(autorange = "reversed"), 
	             paper_bgcolor= "#0f1011", plot_bgcolor = "#0f1011")
}
```

The heat signatures indicates Bombing/Explosive as one of the frequently used techniques by terrorist groups. Although the pattern in this tactic is visiable throughout all the year, while rising during late 80s and early 90s however it has now increased to nearly 7 times since 2006. Similar pattern (with lower magnitude) can be observed in Armed Assault followed by Hostage Taking and Assassination technique. 

```{r echo=FALSE, fig.cap="Trend in type of weapon used in all incidents globally", fig.height=3, out.width = "100%"}
tmp <- df %>% group_by(weapon_type, year) %>% summarise(total_attacks = n())
if( knitr:::is_latex_output() ) {
    include_graphics(path = "figure/heatmap_weapon.png")
} else {
    tmp %>%
	  plot_ly(x=tmp$year, y=tmp$weapon_type, z = tmp$total_attacks, 
	  		  type = "heatmap", colors = viridis::plasma(100),
	          hoverinfo = 'text',text = ~paste("Year: ", year,
	                                           "<br>Weapon type: ", weapon_type,
	                                           "<br>Total attacks : ", total_attacks)) %>%
	    layout(title = "By Weapon Type", 
	           xaxis = list(autorange = "reversed"),
	           yaxis = list(autorange = "reversed"), 
	           paper_bgcolor= "#0f1011", plot_bgcolor = "#0f1011")
}

```

Upon examining the trends in type of weapon used in all terrorist incidents gloablly as shown in the figure 2.3, it is visible that use of Explosives/Bomb/Dynamites and Firearms is extremely high since 2011 and compared to other weapon types. Use of vehicles as weapon type was relatively low until 2013 however it was on peak in 2015 with total 34 number number of attacks. 

Observing trends in target type over the period of time is also a useful way to understand characteristics and ideology amongst terrorist incidents. As shown in the plot below, the heat signature indicates the top five most most frequently attacked target types as Private Citzens & Property followed by Military, Police, Government and Business. 

```{r echo=FALSE, fig.cap="Trend in intended targets in all incidents globally", fig.height=5, out.width = "100%"}
tmp <- df %>% group_by(target_type, year) %>% summarise(total_attacks = n()) 
if( knitr:::is_latex_output() ) {
    include_graphics(path = "figure/heatmap_target.png")
} else {
    tmp %>%
	  plot_ly(x=tmp$year, y=tmp$target_type, z = tmp$total_attacks, 
	  		  type = "heatmap", colors = viridis::plasma(100),
	          hoverinfo = 'text',text = ~paste("Year: ", year,
	                                           "<br>Target type: ", target_type,
	                                           "<br>Total attacks : ", total_attacks)) %>%
	    layout(title = "By Target Type", 
	           xaxis = list(autorange = "reversed"),
	           yaxis = list(autorange = "reversed"), 
	           paper_bgcolor= "#0f1011", plot_bgcolor = "#0f1011")
}
```
According to GTD codebook, Private Citzens & Property category includes attack on individuals, public in general or attacks in highly populated areas such as markets, commercial streets, busy intersections and pedestrian malls. In a study to investigate when terrorist groups are most or least likely to attack civilians, researcher [@Heger_2010] find a relationship with group’s political motivation and suggests that terror groups pursuing a nationalist agenda are more likely to attack civilians. A relatively lower magnitude trend but with gradual increase in recent years is also visible on Religious Figures/Institution and Terrorist/ Non-state Militia category. The inclusion criteria for Terrorist/ Non-state Militia category refers to terrorists or members of terrorist groups (that are identified in GTD) and broadly defined as informants for terrorist groups excluding former or surrendered terrorists. 

## The Top 10 Most Active and Violent Groups

Findings from exploratory data analysis at region level indicates that number of attacks have increased significantly from year 2010 and nearly at the same pace in Middle East & North Africa, South Asia, Sub-suharan Africa and Southeast Asia region. Trends in attack type, weapon type and target type over the same period of time (from 2010) suggests that bombings and explosions as a choice of attack type is growing exponentially while use of explosives & firearms and attacks on civilians is at alarming high level. 

This part of the research identifies and examines the top ten most violent and active terrorist groups based on number of fatalities and number of people injured. GTD codebook suggests that when an attack is a part of multiple attacks, sources sometimes provide a cumulative fatality total for all of the incidents rather than fatality figures for each incident. 

In order to determine top ten most active and violent groups based on fatalities and injured while preserving statistical accuracy, first I filter the dataset for the events that took place from 2010 onwards and remove the incidents where group name is not known. The new variable `impact` is sum of fatalities and number of people injured. Wherever an attack is observed as a part of multiple attacks, and reported figures are different, I use the figure which is maximum amongst all the reported figures while ensuring that reported incidents are distinct and grouped by month, year, region and name of the group as shown in the code below: 

```{r fig.cap="Top 10 Most Active and Violent Groups", fig.height=4, out.width = "100%"}
by_groups <- df %>% 
  filter(group_name != "Unknown" & year >= 2010) %>% 
  replace_na(list(nkill = 0, nwound = 0)) %>% 
  select(group_name, region, year, month, nkill, nwound, 
  		 part_of_multiple_attacks) %>% 
  group_by(group_name, region, year, month) %>% 
  filter(if_else(part_of_multiple_attacks == 1, 
                 nkill == max(nkill) & nwound == max(nwound), 
                 nkill == nkill & nwound == nwound)) %>%
  distinct(group_name, region, year, month, nkill, nwound, 
  		   part_of_multiple_attacks) %>%
  mutate(impact = nkill + nwound) %>%
  group_by(group_name) %>%
  summarise(total = sum(impact)) %>% 
  arrange(desc(total)) %>% 
  head(10)

# create a vector of top 10 groups for later analysis
top10_groups <- as.vector(by_groups$group_name)

ggplot(by_groups, aes(x= reorder(group_name, -total), y= total)) + 
  geom_bar(stat = "identity", fill = "tomato3") +
  scale_x_discrete(labels = function(x) str_wrap(x, width = 10)) +
  ggtitle("Top 10 Most Active and Violent Groups") + 
  xlab("Name of the group") + 
  ylab("Total fatalities + injured") +
  theme(axis.title = element_text(size=9), 
  		axis.text = element_text(size = 8),
        plot.title = element_text(size=12), legend.position = "none")  

```
Based on cummulative number of fatalities and injured people, we can see that ISIL and Taliban, followed by Boko Haram are the most violent groups that are currently active. To better understand their activity over the period of time, we take a look at attack frequency. 

```{r echo=FALSE, fig.cap="Attack Frequency from Top 10 Groups", fig.height=3, out.width = "100%"}

tmp <- df %>% filter(group_name %in% top10_groups) %>% 
	group_by(group_name, year) %>% summarise(total_attacks = n())

if( knitr:::is_latex_output() ) {
    include_graphics(path = "figure/heatmap_attack_t10.png")
} else {
    tmp %>%
      plot_ly(x=tmp$year, y=tmp$group_name, z = tmp$total_attacks, 
      		  type = "heatmap", colors = viridis::plasma(100),
              hoverinfo = 'text',
              text = ~paste("Year: ", year,"<br>Group: ", group_name,
              				"<br>Total attacks : ", total_attacks)) %>%
        layout(title = "By Top 10 Terror Groups", 
               xaxis = list(autorange = "reversed"),
               yaxis = list(autorange = "reversed"), 
               paper_bgcolor= "#0f1011", plot_bgcolor = "#0f1011")
}

```

It’s interesting to see that majority of this most violent terrorist groups (6 out of 10) were formed after 2006 only. Particularly, number of attacks from ISIL can be seen increasing rapidly within shortest period of time (4 years) and a gradual increase in attacks from Taliban (reaching peak at 1249 in year 2015). Attack characteristics for all 10 groups (cummulative) indicates Military as the most frequent target (27.5%) followed by civilians (27.3%). Similarly, Bombing/Explosions and Armed assault as a most frequent attack tactics accounts for 70.4% of all the attacks as shown in the plots below.  

```{r echo= FALSE, fig.cap="Characteristics of top 10 groups", fig.height=3, out.width = "100%"}

group_attack_type <- df %>%  
	filter(group_name %in% top10_groups) %>% 
	group_by(attack_type) %>% 
	summarize(count = n()) %>% arrange(desc(count)) %>% head(10) 

group_target_type <- df %>%  
	filter(group_name %in% top10_groups) %>% 
	group_by(target_type) %>% 
	summarize(count = n()) %>% arrange(desc(count)) %>% head(10)

if( knitr:::is_latex_output() ) {
    include_graphics(path = "figure/heatmap_pie.png")
} else {
	highchart(height = 300) %>% 
	  hc_title(text = "Characteristics by Attack and Target Types") %>%
	  hc_subtitle(text = "By Top 10 Most Active and Violent Groups") %>%
	  hc_add_theme(hc_theme_538()) %>%
	  hc_add_series_labels_values(group_attack_type$attack_type, group_attack_type$count, 
	                              colors = substr(heat.colors(9), 0 , 7),
	                              type = "pie", innerSize= '40%', size= "30%", showInLegend=F,
	                              colorByPoint = TRUE, center = c('25%', '45%'), size = 100, 
	                              dataLabels = list(align = "left", enabled = TRUE,
	                                                style = list(fontSize = "10px"))) %>%
	  hc_add_series_labels_values(group_target_type$target_type, group_target_type$count, 
	                              colors = substr(heat.colors(10), 0 , 7),
	                              type = "pie", innerSize= '40%', size= "30%", showInLegend=F,
	                              colorByPoint = TRUE, center = c('77%', '49%'), size = 100, 
	                              dataLabels = list(align = "right", enabled = TRUE,
	                                                style = list(fontSize = "10px"))) 
}

```

To summarize, we identified the top 10 most lethal groups that are active between 2010 to 2016 and examined their characteristics behind attacks. We looked at the trend in type of attack and corresponding number of attacks over the period of time, which upto certain extent, indicates easy access to firearms and explosive devices either through illegal arms trade or through undisclosed support from powerful nation/s. We also examined pattern in target type in which, 46.7% attacks accounts for Military and Police category and 27.3% attack counts toward civilians. 

## The Major and Minor Epicenters

The term "Epicenter" used here refers to the location that is impacted by terrorist incidents from top 10 groups as defined. To examing the geographical spread and intensity of incidents from top 10 terroist groups at country level, I use cummulative sum of number of people killed and number of people wounded as measurement. Below is the code used to prepare the data for this analysis. 

```{r }
tmp <- df %>% 
  filter(group_name %in% top10_groups) %>%
  replace_na(list(nkill = 0, nwound = 0)) %>% 
  group_by(group_name, region, year, month) %>% 
  filter(if_else(part_of_multiple_attacks == 1, 
                 nkill == max(nkill) & nwound == max(nwound), 
                 nkill == nkill & nwound == nwound)) %>%
  ungroup() %>%
  distinct(group_name, region, country, year, month, nkill,
  		   nwound, part_of_multiple_attacks) %>%
  group_by(country, region) %>%
  summarise(attack_count = n(), nkill_plus_nwound = sum(nkill + nwound))

```

```{r }
tbl <- tmp %>% filter(region %in% c("North America", "Eastern Europe"))
knitr::kable(tbl, booktabs = TRUE,
		caption = "Terrorism Epicenters in North America and Eastern Europe") %>%
		kable_styling(latex_options = "hold_position")

```
 As shown in table 2.2, North America and Eastern Europe region seems to have concentration on mainly one country across whole region (except Russia with comparatively minor impact). Next, we take a look at remaining regions.

```{r fig.cap="The Major and Minor Epicenters of Terrorism", fig.height=7, out.width = "100%"}
tmp <- tmp %>% filter(!region %in% c("North America", "Eastern Europe")) 
tmp %>%
  ggplot(aes(area = attack_count, fill = nkill_plus_nwound, label = country)) +
    geom_treemap() +
    geom_treemap_text(fontface = "italic", colour = "white", 
    				  place = "centre", grow = TRUE) +
    labs(title = "The Major and Minor Epicenters of Terrorism",
         subtitle = "Based on Top 10 Most Active and Violent Groups") +
    scale_fill_viridis(discrete = FALSE, begin = 0.1, end = 0.8) +
    facet_wrap( ~ region, ncol = 2) +
    guides(fill = guide_colorbar(barwidth = 12))+
    theme(plot.title = element_text(size=12))
  
```

While Afghanistan facing the largest impact from terrorist incidents in terms of fatalities and number of people injured followed by Iraq, it is also observed that spread across multiple countries in most regions. In Sub-Suharan Africa, the major epicenters of violent terrorist incidents can be seen mostly in Somalia and Nigeria. Although number of fatalities and injured is relatively less in Central Asia and Southeast Asia however major Epicenters can be identified as Philippines, Turkmenistan and Georgia. 

In case Western Europe, it is surprising to see Germany and France as major epicenters and relatively high number of minor epicenters. Although number of fatalities and injured is relatively low but spread across many countries implies greater threat. 

To better understand exactly where this incidents belongs to, let us narrow down the analysis to city level for each groups. 

```{r fig.cap="Terrorist Group and Impacted Cities", fig.height=6, out.width = "100%"}
tmp <- df %>% 
  filter(group_name %in% top10_groups) %>%
  replace_na(list(nkill = 0, nwound = 0)) %>% 
  group_by(group_name, region, year, month) %>% 
  filter(if_else(part_of_multiple_attacks == 1, 
                 nkill == max(nkill) & nwound == max(nwound), 
                 nkill == nkill & nwound == nwound)) %>%
  ungroup() %>%
  distinct(group_name, region, country, city, year, month, 
           nkill, nwound, part_of_multiple_attacks) %>%
  group_by(city, group_name) %>% 
  summarise(attack_count = n(), 
  			nkill_plus_nwound = sum(nkill + nwound)) %>%
  filter(nkill_plus_nwound >= 100 & city != "Unknown")

tmp %>%
  ggplot(aes(area = attack_count, 
  			 fill = nkill_plus_nwound, 
  			 label = city)) +
    geom_treemap() +
    geom_treemap_text(fontface = "italic", colour = "white", 
    				  place = "centre", grow = TRUE) +
    labs(title = "Most Frequently Attacked Cities per Group", 
         subtitle = "Based on Top 10 Most Active and Violent Groups") +
    scale_fill_viridis(discrete = FALSE, begin = 0.1, end = 0.8) +
    facet_wrap( ~ group_name, ncol = 3) +
    guides(fill = guide_colorbar(barwidth = 12)) +
    theme(plot.title = element_text(size=12), 
          strip.text = element_text(size = 8, face = "bold"))

```

